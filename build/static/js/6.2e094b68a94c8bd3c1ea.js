webpackJsonp([6],{173:function(e,a,t){"use strict";function o(e){t(237)}Object.defineProperty(a,"__esModule",{value:!0});var r=t(239),s=t(241),n=t(4),i=o,m=n(r.a,s.a,i,"data-v-1fce103a",null);a.default=m.exports},237:function(e,a,t){var o=t(238);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);t(163)("1ff7e9ea",o,!0)},238:function(e,a,t){a=e.exports=t(162)(!0),a.push([e.i,"#red-package[data-v-1fce103a]{color:#585b60}#red-package .col-form-label[data-v-1fce103a]{text-align:center}#red-package footer[data-v-1fce103a]{margin-top:32px;margin-top:2rem;padding-bottom:32px;padding-bottom:2rem;margin-right:-15px;margin-left:-15px;border-top:1px solid #b9b9b9}#red-package footer .save[data-v-1fce103a]{margin-top:24px;margin-top:1.5rem;margin-right:auto;margin-left:auto;display:block;padding:12.8px 64px;padding:.8rem 4rem;background-color:#555;color:#fff;border-radius:0}#red-package footer .save[disabled=disabled][data-v-1fce103a]{background-color:#cacaca}.money input[data-v-1fce103a]{margin-right:7px}.inline-margin[data-v-1fce103a]{line-height:35.2px;line-height:2.2rem}.toggle-button[data-v-1fce103a]{margin-top:5px}.redRandom[data-v-1fce103a]{display:inline-block}","",{version:3,sources:["/Users/hxf/www/weRobot/src/page/Operate/RedPacket.vue"],names:[],mappings:"AAAA,8BAA8B,aAAa,CAAC,8CAA8C,iBAAiB,CAAC,qCAAqC,gBAAgB,gBAAgB,oBAAoB,oBAAoB,mBAAmB,kBAAkB,4BAA4B,CAAC,2CAA2C,gBAAgB,kBAAkB,kBAAkB,iBAAiB,cAAc,oBAAoB,mBAAmB,sBAAsB,WAAW,eAAe,CAAC,8DAA8D,wBAAwB,CAAC,8BAA8B,gBAAgB,CAAC,gCAAgC,mBAAmB,kBAAkB,CAAC,gCAAgC,cAAc,CAAC,4BAA4B,oBAAoB,CAAC",file:"RedPacket.vue",sourcesContent:["#red-package[data-v-1fce103a]{color:#585b60}#red-package .col-form-label[data-v-1fce103a]{text-align:center}#red-package footer[data-v-1fce103a]{margin-top:32px;margin-top:2rem;padding-bottom:32px;padding-bottom:2rem;margin-right:-15px;margin-left:-15px;border-top:1px solid #b9b9b9}#red-package footer .save[data-v-1fce103a]{margin-top:24px;margin-top:1.5rem;margin-right:auto;margin-left:auto;display:block;padding:12.8px 64px;padding:.8rem 4rem;background-color:#555;color:#fff;border-radius:0}#red-package footer .save[disabled=disabled][data-v-1fce103a]{background-color:#cacaca}.money input[data-v-1fce103a]{margin-right:7px}.inline-margin[data-v-1fce103a]{line-height:35.2px;line-height:2.2rem}.toggle-button[data-v-1fce103a]{margin-top:5px}.redRandom[data-v-1fce103a]{display:inline-block}"],sourceRoot:""}])},239:function(e,a,t){"use strict";var o=t(12),r=t.n(o),s=t(13),n=t.n(s),i=t(5),m=t.n(i),c=t(9),l=t(240);a.a={name:"RedPacket",created:function(){this.getConfig()},data:function(){return{validate:{budget:function(e){if(e.budget<1)throw new Error("预算不得小于一块")},redEnvelopesNums:function(e){var a=e.budget,t=e.redEnvelopesNums;if(t<1)throw new Error("数量不得小于一个");if(a/100<t)throw new Error("单个红包不得小于一块")},amountRandomLower:function(e){var a=e.amountRandomLower,t=e.budget;if(1===e.redEnvelopesType)return!1;if(a<1)throw new Error("过小");if(a>t)throw new Error("过大");return!0},amountRandomUpper:function(e){var a=e.budget,t=e.amountRandomUpper,o=e.amountRandomLower;if(1===e.redEnvelopesType)return!1;if(t<1)throw new Error("过小");if(t<o)throw new Error("过小");if(t>a)throw new Error("过小");return!0},timesLimitUpper:function(e){var a=e.timesLimitUpper;if(!e.timesLimit)return!1;if(a<1)throw new Error("限制不得小于一次");return!0}},formData:{status:0,budget:"",redEnvelopesNums:"",redEnvelopesType:1,amountRandomUpper:"",amountRandomLower:"",pageDoc1:"",pageDoc2:"",pageDoc3:"",timesLimit:!1,timesLimitUpper:""},readOnly:!1}},methods:m()({getConfig:function(){var e=this;return n()(r.a.mark(function a(){var t;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.loading({text:"正在加载"}),a.prev=1,a.next=4,l.a.getEnvelopesConfig({groupId:e.$route.params.id});case 4:t=a.sent,t&&(e.readOnly=!0,e.formData=t),e.loaded(100),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(1),e.loading({text:a.t0.message}),e.loaded(1500);case 13:case"end":return a.stop()}},a,e,[[1,9]])}))()},init:function(){this.formData={status:0,budget:"",redEnvelopesNums:"",redEnvelopesType:1,amountRandomUpper:"",amountRandomLower:"",pageDoc1:"",pageDoc2:"",timesLimit:!1,timesLimitUpper:""},this.readOnly=!1},submit:function(){this.readOnly?this.closePacket():this.openPacket()},openPacket:function(){var e=this;return n()(r.a.mark(function a(){var t;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.loading({text:"正在保存"}),a.prev=1,a.next=4,l.a.redEnvelopesConfig(m()({},e.formData,{userId:e.userId,groupId:e.$route.params.id}));case 4:return t=a.sent,e.loading({text:t}),a.next=8,e.getConfig();case 8:a.next=14;break;case 10:a.prev=10,a.t0=a.catch(1),e.loading({text:a.t0.message}),e.loaded(1500);case 14:case"end":return a.stop()}},a,e,[[1,10]])}))()},closePacket:function(){var e=this;return n()(r.a.mark(function a(){var t;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.loading({text:"正在关闭"}),a.prev=1,a.next=4,l.a.redEnvelopesClose({groupId:e.$route.params.id});case 4:return t=a.sent,e.loading({text:t}),e.init(),a.next=9,e.getConfig();case 9:a.next=15;break;case 11:a.prev=11,a.t0=a.catch(1),e.loading({text:a.t0.message}),e.loaded(1500);case 15:case"end":return a.stop()}},a,e,[[1,11]])}))()}},Object(c.c)(["loading"]),Object(c.b)(["loaded"])),watch:{$route:function(){var e=this;return n()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.init(),a.next=3,e.getConfig();case 3:case"end":return a.stop()}},a,e)}))()}},computed:m()({status:{get:function(){return!!this.formData.status},set:function(e){this.formData.status=e?1:0}},isSave:function(){return(!this.formData.status||!this.readOnly)&&(""!==this.formData.budget&&""!==this.formData.redEnvelopesNums&&(""!==this.formData.pageDoc1&&""!==this.formData.pageDoc2&&""!==this.formData.pageDoc3&&((2!==this.formData.redEnvelopesType||""!==this.formData.amountRandomLower&&""!==this.formData.amountRandomUpper)&&(!this.formData.timesLimit||""!==this.formData.timesLimitUpper))))},statusStr:function(){return{1:"正在进行",2:"已领完",3:"已关闭"}[this.formData.status]},budget:{get:function(){return this.formData.budget?this.formData.budget/100:""},set:function(e){this.formData.budget=100*e}},amountRandomUpper:{get:function(){return this.formData.amountRandomUpper?this.formData.amountRandomUpper/100:""},set:function(e){this.formData.amountRandomUpper=100*e}},amountRandomLower:{get:function(){return this.formData.amountRandomLower?this.formData.amountRandomLower/100:""},set:function(e){this.formData.amountRandomLower=100*e}}},Object(c.d)("User",{userId:"userToken"}))}},240:function(e,a,t){"use strict";var o=t(16),r=t.n(o),s=t(22),n=function(e){return new r.a(function(a,t){s.b.post("/red/redEnvelopesConfig",e).then(function(e){e.data.status?a(e.data.message):t(new Error(e.data.message))}).catch(function(){t(new Error("网络不稳定请刷新重试！"))})})},i=function(e){return new r.a(function(a,t){s.b.get("/red/getEnvelopesConfig",{params:e}).then(function(e){e.data.status?a(e.data.entry):t(new Error(e.data.message))}).catch(function(){t(new Error("网络不稳定请刷新重试！"))})})},m=function(){return new r.a(function(e,a){s.b.get("/red/envelopesConfigInit").then(function(t){t.data.status?e(t.data.entry):a(new Error(t.data.message))}).catch(function(){a(new Error("网络不稳定请刷新重试！"))})})},c=function(e){return new r.a(function(a,t){s.b.get("/red/redEnvelopesClose",{params:e}).then(function(e){e.data.status?a(e.data.message):t(new Error(e.data.message))}).catch(function(){t(new Error("网络不稳定请刷新重试！"))})})};a.a={redEnvelopesConfig:n,getEnvelopesConfig:i,envelopesConfigInit:m,redEnvelopesClose:c}},241:function(e,a,t){"use strict";var o=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("form",{directives:[{name:"validate",rawName:"v-validate.formData",value:e.validate,expression:"validate",modifiers:{formData:!0}}],attrs:{id:"red-package"},on:{submit:function(a){a.preventDefault(),e.submit(a)}}},[t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"status"}},[e._v("功能状态   ")]),e._v(" "),t("div",{staticClass:"col-sm-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.status,expression:"status"}],staticClass:"toggle-button",attrs:{type:"checkbox",name:"status",id:"status"},domProps:{checked:Array.isArray(e.status)?e._i(e.status,null)>-1:e.status},on:{__c:function(a){var t=e.status,o=a.target,r=!!o.checked;if(Array.isArray(t)){var s=e._i(t,null);o.checked?s<0&&(e.status=t.concat([null])):s>-1&&(e.status=t.slice(0,s).concat(t.slice(s+1)))}else e.status=r}}})]),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.readOnly&&e.status,expression:"readOnly && status"}],staticClass:"inline-margin"},[e._v("红包状态："+e._s(e.statusStr))])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.status,expression:"status"}],staticClass:"form-group row"},[t("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"budget"}},[e._v("群内红包预算 ")]),e._v(" "),t("div",{staticClass:"col-sm-2"},[t("input",{directives:[{name:"model",rawName:"v-model.number",value:e.budget,expression:"budget",modifiers:{number:!0}}],staticClass:"form-control",attrs:{type:"number",name:"budget",id:"budget",placeholder:"元",readonly:e.readOnly},domProps:{value:e.budget},on:{input:function(a){a.target.composing||(e.budget=e._n(a.target.value))},blur:function(a){e.$forceUpdate()}}})]),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.readOnly,expression:"readOnly"}],staticClass:"inline-margin"},[e._v("剩余金额："+e._s(e.formData.residueAmount/100)+"元")])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.status,expression:"status"}],staticClass:"form-group row"},[t("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"num"}},[e._v("红包发放个数 ")]),e._v(" "),t("div",{staticClass:"col-sm-2"},[t("input",{directives:[{name:"model",rawName:"v-model.number",value:e.formData.redEnvelopesNums,expression:"formData.redEnvelopesNums",modifiers:{number:!0}}],staticClass:"form-control",attrs:{type:"number",name:"redEnvelopesNums",id:"num",placeholder:"个",readonly:e.readOnly},domProps:{value:e.formData.redEnvelopesNums},on:{input:function(a){a.target.composing||(e.formData.redEnvelopesNums=e._n(a.target.value))},blur:function(a){e.$forceUpdate()}}})]),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.readOnly,expression:"readOnly"}],staticClass:"inline-margin"},[e._v("剩余数量："+e._s(e.formData.residueNums)+"个")])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.status,expression:"status"}],staticClass:"form-group row money"},[t("label",{staticClass:"col-sm-2 col-form-label"},[e._v("拉新红包金额 ")]),e._v(" "),t("div",{staticClass:"col-sm-8"},[t("div",{staticClass:"form-check"},[t("label",{staticClass:"form-check-label",attrs:{for:"fix"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.redEnvelopesType,expression:"formData.redEnvelopesType"}],staticClass:"form-check-input",attrs:{type:"radio",name:"type",id:"fix",disabled:e.readOnly},domProps:{value:1,checked:e._q(e.formData.redEnvelopesType,1)},on:{__c:function(a){e.formData.redEnvelopesType=1}}}),e._v("固定红包\n                ")])]),e._v(" "),t("div",{staticClass:"form-row align-items-center"},[t("div",{staticClass:"col-auto"},[t("label",{staticClass:"form-check-label",attrs:{for:"random"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.redEnvelopesType,expression:"formData.redEnvelopesType"}],staticClass:"form-check-input",attrs:{type:"radio",name:"type",id:"random",disabled:e.readOnly},domProps:{value:2,checked:e._q(e.formData.redEnvelopesType,2)},on:{__c:function(a){e.formData.redEnvelopesType=2}}}),e._v("随机红包\n                    ")])]),e._v(" "),t("div",{staticClass:"col-auto"},[t("input",{directives:[{name:"model",rawName:"v-model.number",value:e.amountRandomLower,expression:"amountRandomLower",modifiers:{number:!0}},{name:"show",rawName:"v-show",value:2===e.formData.redEnvelopesType,expression:"formData.redEnvelopesType === 2"}],staticClass:"form-control redRandom",attrs:{type:"number",name:"amountRandomLower",readonly:e.readOnly},domProps:{value:e.amountRandomLower},on:{input:function(a){a.target.composing||(e.amountRandomLower=e._n(a.target.value))},blur:function(a){e.$forceUpdate()}}})]),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:2===e.formData.redEnvelopesType,expression:"formData.redEnvelopesType === 2"}]},[e._v("-")]),e._v(" "),t("div",{staticClass:"col-auto"},[t("input",{directives:[{name:"model",rawName:"v-model.number",value:e.amountRandomUpper,expression:"amountRandomUpper",modifiers:{number:!0}},{name:"show",rawName:"v-show",value:2===e.formData.redEnvelopesType,expression:"formData.redEnvelopesType === 2"}],staticClass:"form-control redRandom",attrs:{type:"number",name:"amountRandomUpper",readonly:e.readOnly},domProps:{value:e.amountRandomUpper},on:{input:function(a){a.target.composing||(e.amountRandomUpper=e._n(a.target.value))},blur:function(a){e.$forceUpdate()}}})])])])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.status,expression:"status"}],staticClass:"form-group row money"},[t("label",{staticClass:"col-sm-2 col-form-label"},[e._v("单人邀请奖励数")]),e._v(" "),t("div",{staticClass:"col-sm-8"},[t("div",{staticClass:"form-check"},[t("label",{staticClass:"form-check-label"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.timesLimit,expression:"formData.timesLimit"}],staticClass:"form-check-input",attrs:{type:"radio",name:"limit",disabled:e.readOnly},domProps:{value:!1,checked:e._q(e.formData.timesLimit,!1)},on:{__c:function(a){e.formData.timesLimit=!1}}}),e._v("不限\n                ")])]),e._v(" "),t("div",{staticClass:"form-row align-items-center"},[t("div",{staticClass:"col-auto"},[t("label",{staticClass:"form-check-label"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.timesLimit,expression:"formData.timesLimit"}],staticClass:"form-check-input",attrs:{type:"radio",name:"limit",disabled:e.readOnly},domProps:{value:!0,checked:e._q(e.formData.timesLimit,!0)},on:{__c:function(a){e.formData.timesLimit=!0}}}),e._v("限制次数\n                    ")])]),e._v(" "),t("div",{staticClass:"col-auto"},[t("input",{directives:[{name:"model",rawName:"v-model.number",value:e.formData.timesLimitUpper,expression:"formData.timesLimitUpper",modifiers:{number:!0}},{name:"show",rawName:"v-show",value:e.formData.timesLimit,expression:"formData.timesLimit"}],staticClass:"form-control",staticStyle:{width:"80px"},attrs:{type:"number",placeholder:"次",name:"timesLimitUpper",readonly:e.readOnly},domProps:{value:e.formData.timesLimitUpper},on:{input:function(a){a.target.composing||(e.formData.timesLimitUpper=e._n(a.target.value))},blur:function(a){e.$forceUpdate()}}})]),e._v(" "),t("small",{staticClass:"form-text text-muted"},[e._v("单人邀请他人入群，奖励到达上限后，不再发放")])])])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.status,expression:"status"}],staticClass:"form-group row"},[t("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"header-text"}},[e._v("红包页文案  ")]),e._v(" "),t("div",{staticClass:"col-sm-4"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.pageDoc1,expression:"formData.pageDoc1"}],staticClass:"form-control",attrs:{type:"text",name:"pageDoc1",id:"header-text",placeholder:"文案1",readonly:e.readOnly,maxlength:"14"},domProps:{value:e.formData.pageDoc1},on:{input:function(a){a.target.composing||(e.formData.pageDoc1=a.target.value)}}})])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.status,expression:"status"}],staticClass:"form-group row"},[t("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"bottom-text"}}),e._v(" "),t("div",{staticClass:"col-sm-4"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.pageDoc2,expression:"formData.pageDoc2"}],staticClass:"form-control",attrs:{type:"text",name:"pageDoc2",id:"bottom-text",placeholder:"文案2",readonly:e.readOnly,maxlength:"18"},domProps:{value:e.formData.pageDoc2},on:{input:function(a){a.target.composing||(e.formData.pageDoc2=a.target.value)}}})])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.status,expression:"status"}],staticClass:"form-group row"},[t("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"bottom-text"}}),e._v(" "),t("div",{staticClass:"col-sm-4"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.pageDoc3,expression:"formData.pageDoc3"}],staticClass:"form-control",attrs:{type:"text",name:"pageDoc2",id:"bottom-text",placeholder:"文案3",readonly:e.readOnly,maxlength:"22"},domProps:{value:e.formData.pageDoc3},on:{input:function(a){a.target.composing||(e.formData.pageDoc3=a.target.value)}}})])]),e._v(" "),t("footer",[t("button",{staticClass:"save",attrs:{type:"submit",disabled:!e.isSave}},[e._v("保存")])])])},r=[],s={render:o,staticRenderFns:r};a.a=s}});
//# sourceMappingURL=6.2e094b68a94c8bd3c1ea.js.map