webpackJsonp([5],{165:function(e,t,a){function n(e){a(247)}var o=a(4)(a(249),a(251),n,"data-v-1fce103a",null);e.exports=o.exports},247:function(e,t,a){var n=a(248);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(155)("1ff7e9ea",n,!0)},248:function(e,t,a){t=e.exports=a(154)(!0),t.push([e.i,"#red-package[data-v-1fce103a]{color:#585b60}#red-package .col-form-label[data-v-1fce103a]{text-align:center}#red-package footer[data-v-1fce103a]{margin-top:32px;margin-top:2rem;padding-bottom:32px;padding-bottom:2rem;margin-right:-15px;margin-left:-15px;border-top:1px solid #b9b9b9}#red-package footer .save[data-v-1fce103a]{margin-top:24px;margin-top:1.5rem;margin-right:auto;margin-left:auto;display:block;padding:12.8px 64px;padding:.8rem 4rem;background-color:#555;color:#fff;border-radius:0}#red-package footer .save[disabled=disabled][data-v-1fce103a]{background-color:#cacaca}.money input[data-v-1fce103a]{margin-right:7px}.inline-margin[data-v-1fce103a]{line-height:35.2px;line-height:2.2rem}.toggle-button[data-v-1fce103a]{margin-top:5px}","",{version:3,sources:["/Users/hxf/www/weRobot/src/page/Operate/RedPacket.vue"],names:[],mappings:"AAAA,8BAA8B,aAAa,CAAC,8CAA8C,iBAAiB,CAAC,qCAAqC,gBAAgB,gBAAgB,oBAAoB,oBAAoB,mBAAmB,kBAAkB,4BAA4B,CAAC,2CAA2C,gBAAgB,kBAAkB,kBAAkB,iBAAiB,cAAc,oBAAoB,mBAAmB,sBAAsB,WAAW,eAAe,CAAC,8DAA8D,wBAAwB,CAAC,8BAA8B,gBAAgB,CAAC,gCAAgC,mBAAmB,kBAAkB,CAAC,gCAAgC,cAAc,CAAC",file:"RedPacket.vue",sourcesContent:["#red-package[data-v-1fce103a]{color:#585b60}#red-package .col-form-label[data-v-1fce103a]{text-align:center}#red-package footer[data-v-1fce103a]{margin-top:32px;margin-top:2rem;padding-bottom:32px;padding-bottom:2rem;margin-right:-15px;margin-left:-15px;border-top:1px solid #b9b9b9}#red-package footer .save[data-v-1fce103a]{margin-top:24px;margin-top:1.5rem;margin-right:auto;margin-left:auto;display:block;padding:12.8px 64px;padding:.8rem 4rem;background-color:#555;color:#fff;border-radius:0}#red-package footer .save[disabled=disabled][data-v-1fce103a]{background-color:#cacaca}.money input[data-v-1fce103a]{margin-right:7px}.inline-margin[data-v-1fce103a]{line-height:35.2px;line-height:2.2rem}.toggle-button[data-v-1fce103a]{margin-top:5px}"],sourceRoot:""}])},249:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(7),o=a.n(n),r=a(19),s=a.n(r),i=a(20),c=a.n(i),p=a(11),l=a(250);t.default={name:"RedPacket",created:function(){var e=this;return c()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getConfig();case 2:case"end":return t.stop()}},t,e)}))()},data:function(){return{packetData:{status:0,budget:"",redEnvelopesNums:"",redEnvelopesType:1,amountRandomUpper:"",amountRandomLower:"",pageDoc1:"",pageDoc2:"",timesLimit:!1,timesLimitUpper:""},readOnly:!1}},methods:o()({getConfig:function(){var e=this;return c()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading({text:"正在初始化"}),t.prev=1,t.next=4,l.a.getEnvelopesConfig({groupId:e.$route.params.id});case 4:a=t.sent,null===a?e.packetData.status=0:(e.readOnly=!0,e.packetData=a),e.loaded(1500),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),e.loading({text:t.t0}),e.loaded(1500);case 13:case"end":return t.stop()}},t,e,[[1,9]])}))()},init:function(){this.packetData={status:0,budget:"",redEnvelopesNums:"",redEnvelopesType:1,amountRandomUpper:"",amountRandomLower:"",pageDoc1:"",pageDoc2:"",timesLimit:!1,timesLimitUpper:""}},submit:function(){this.readOnly?this.closePacket():this.openPacket()},openPacket:function(){var e=this;return c()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading({text:"正在保存"}),t.prev=1,t.next=4,l.a.redEnvelopesConfig(o()({},e.packetData,{userId:e.userId,groupId:e.$route.params.id}));case 4:return a=t.sent,e.loading({text:a}),t.next=8,e.getConfig();case 8:t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),e.loading({text:t.t0}),e.loaded(1500);case 14:case"end":return t.stop()}},t,e,[[1,10]])}))()},closePacket:function(){var e=this;return c()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading({text:"正在关闭"}),t.prev=1,t.next=4,l.a.redEnvelopesClose({groupId:e.$route.params.id});case 4:return a=t.sent,e.loading({text:a}),t.next=8,e.getConfig();case 8:t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),e.loading({text:t.t0}),e.loaded(1500);case 14:case"end":return t.stop()}},t,e,[[1,10]])}))()}},Object(p.c)(["loading"]),Object(p.b)(["loaded"])),watch:{$route:function(){var e=this;return c()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.readOnly=!1,e.init(),t.next=4,e.getConfig();case 4:case"end":return t.stop()}},t,e)}))()}},computed:o()({status:{get:function(){return 0!==this.packetData.status},set:function(e){this.packetData.status=!1===e?0:1}},statusStr:function(){var e="";switch(this.packetData.status){case 1:e="正在进行";break;case 2:e="已领完";break;case 3:e="已关闭"}return e},budget:{get:function(){return""===this.packetData.budget?"":this.packetData.budget/100},set:function(e){this.packetData.budget=100*e}},amountRandomUpper:{get:function(){return""===this.packetData.amountRandomUpper?"":this.packetData.amountRandomUpper/100},set:function(e){this.packetData.amountRandomUpper=100*e}},amountRandomLower:{get:function(){return""===this.packetData.amountRandomLower?"":this.packetData.amountRandomLower/100},set:function(e){this.packetData.amountRandomLower=100*e}}},Object(p.d)("User",{userId:"userToken"}))}},250:function(e,t,a){"use strict";var n=a(14),o=a.n(n),r=a(35),s=function(e){return new o.a(function(t,a){r.b.post("/red/redEnvelopesConfig",e).then(function(e){e.data.status?t(e.data.message):a(e.data.message)}).catch(function(){a("网络不稳定请刷新重试！")})})},i=function(e){return new o.a(function(t,a){r.b.get("/red/getEnvelopesConfig",{params:e}).then(function(e){e.data.status?t(e.data.entry):a(e.data.message)}).catch(function(){a("网络不稳定请刷新重试！")})})},c=function(){return new o.a(function(e,t){r.b.get("/red/envelopesConfigInit").then(function(a){a.data.status?e(a.data.entry):t(a.data.message)}).catch(function(){t("网络不稳定请刷新重试！")})})},p=function(e){return new o.a(function(t,a){r.b.get("/red/redEnvelopesClose",{params:e}).then(function(e){e.data.status?t(e.data.message):a(e.data.message)}).catch(function(){a("网络不稳定请刷新重试！")})})};t.a={redEnvelopesConfig:s,getEnvelopesConfig:i,envelopesConfigInit:c,redEnvelopesClose:p}},251:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{attrs:{id:"red-package"},on:{submit:function(t){t.preventDefault(),e.submit(t)}}},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"status"}},[e._v("功能状态  ")]),e._v(" "),a("div",{staticClass:"col-sm-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.status,expression:"status"}],staticClass:"toggle-button",attrs:{type:"checkbox",id:"status"},domProps:{checked:Array.isArray(e.status)?e._i(e.status,null)>-1:e.status},on:{__c:function(t){var a=e.status,n=t.target,o=!!n.checked;if(Array.isArray(a)){var r=e._i(a,null);n.checked?r<0&&(e.status=a.concat(null)):r>-1&&(e.status=a.slice(0,r).concat(a.slice(r+1)))}else e.status=o}}})]),e._v(" "),e.readOnly&&e.status?a("span",{staticClass:"inline-margin"},[e._v("红包状态："+e._s(e.statusStr))]):e._e()]),e._v(" "),e.status?a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"budget"}},[e._v("群内红包预算")]),e._v(" "),a("div",{staticClass:"col-sm-2"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.budget,expression:"budget",modifiers:{number:!0}}],staticClass:"form-control",attrs:{type:"number",id:"budget",placeholder:"元",min:"1",readonly:e.readOnly},domProps:{value:e.budget},on:{input:function(t){t.target.composing||(e.budget=e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),e.readOnly?a("span",{staticClass:"inline-margin"},[e._v("剩余金额："+e._s(e.packetData.residueAmount/100)+"元")]):e._e()]):e._e(),e._v(" "),e.status?a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"num"}},[e._v("红包发放个数")]),e._v(" "),a("div",{staticClass:"col-sm-2"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.packetData.redEnvelopesNums,expression:"packetData.redEnvelopesNums",modifiers:{number:!0}}],staticClass:"form-control",attrs:{type:"number",id:"num",placeholder:"个",min:"1",readonly:e.readOnly},domProps:{value:e.packetData.redEnvelopesNums},on:{input:function(t){t.target.composing||(e.packetData.redEnvelopesNums=e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),e.readOnly?a("span",{staticClass:"inline-margin"},[e._v("剩余数量："+e._s(e.packetData.residueNums)+"个")]):e._e()]):e._e(),e._v(" "),e.status?a("div",{staticClass:"form-group row money"},[a("label",{staticClass:"col-sm-2 col-form-label"},[e._v("拉新红包金额")]),e._v(" "),a("div",{staticClass:"col-sm-8"},[a("div",{staticClass:"form-check"},[a("label",{staticClass:"form-check-label",attrs:{for:"fix"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.packetData.redEnvelopesType,expression:"packetData.redEnvelopesType"}],staticClass:"form-check-input",attrs:{type:"radio",name:"type",id:"fix",disabled:e.readOnly},domProps:{value:1,checked:e._q(e.packetData.redEnvelopesType,1)},on:{__c:function(t){e.packetData.redEnvelopesType=1}}}),e._v("固定红包\n                ")])]),e._v(" "),a("div",{staticClass:"form-check"},[a("label",{staticClass:"form-check-label",attrs:{for:"random"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.packetData.redEnvelopesType,expression:"packetData.redEnvelopesType"}],staticClass:"form-check-input",attrs:{type:"radio",name:"type",id:"random",disabled:e.readOnly},domProps:{value:2,checked:e._q(e.packetData.redEnvelopesType,2)},on:{__c:function(t){e.packetData.redEnvelopesType=2}}}),e._v("随机红包\n                    "),2===e.packetData.redEnvelopesType?a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.amountRandomLower,expression:"amountRandomLower",modifiers:{number:!0}}],staticStyle:{width:"80px"},attrs:{type:"number",min:"1",max:e.budget,readonly:e.readOnly},domProps:{value:e.amountRandomLower},on:{input:function(t){t.target.composing||(e.amountRandomLower=e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}}):e._e(),e._v(" "),2===e.packetData.redEnvelopesType?a("span",[e._v("- ")]):e._e(),e._v(" "),2===e.packetData.redEnvelopesType?a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.amountRandomUpper,expression:"amountRandomUpper",modifiers:{number:!0}}],staticStyle:{width:"80px"},attrs:{type:"number",min:e.amountRandomLower,max:e.budget,readonly:e.readOnly},domProps:{value:e.amountRandomUpper},on:{input:function(t){t.target.composing||(e.amountRandomUpper=e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}}):e._e()])])])]):e._e(),e._v(" "),e.status?a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"header-text"}},[e._v("红包页文案")]),e._v(" "),a("div",{staticClass:"col-sm-4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.packetData.pageDoc1,expression:"packetData.pageDoc1"}],staticClass:"form-control",attrs:{type:"text",id:"header-text",placeholder:"红包说明文案",maxlength:"6",readonly:e.readOnly},domProps:{value:e.packetData.pageDoc1},on:{input:function(t){t.target.composing||(e.packetData.pageDoc1=t.target.value)}}})])]):e._e(),e._v(" "),e.status?a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"bottom-text"}}),e._v(" "),a("div",{staticClass:"col-sm-4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.packetData.pageDoc2,expression:"packetData.pageDoc2"}],staticClass:"form-control",attrs:{type:"text",id:"bottom-text",placeholder:"邀请拉新文案",maxlength:"25",readonly:e.readOnly},domProps:{value:e.packetData.pageDoc2},on:{input:function(t){t.target.composing||(e.packetData.pageDoc2=t.target.value)}}})])]):e._e(),e._v(" "),e.status?a("div",{staticClass:"form-group row money"},[a("label",{staticClass:"col-sm-2 col-form-label"},[e._v("单人邀请奖励数")]),e._v(" "),a("div",{staticClass:"col-sm-8"},[a("div",{staticClass:"form-check"},[a("label",{staticClass:"form-check-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.packetData.timesLimit,expression:"packetData.timesLimit"}],staticClass:"form-check-input",attrs:{type:"radio",name:"limit",disabled:e.readOnly},domProps:{value:!1,checked:e._q(e.packetData.timesLimit,!1)},on:{__c:function(t){e.packetData.timesLimit=!1}}}),e._v("不限\n                ")])]),e._v(" "),a("div",{staticClass:"form-check"},[a("label",{staticClass:"form-check-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.packetData.timesLimit,expression:"packetData.timesLimit"}],staticClass:"form-check-input",attrs:{type:"radio",name:"limit",disabled:e.readOnly},domProps:{value:!0,checked:e._q(e.packetData.timesLimit,!0)},on:{__c:function(t){e.packetData.timesLimit=!0}}}),e._v("限制次数\n                    "),e.packetData.timesLimit?a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.packetData.timesLimitUpper,expression:"packetData.timesLimitUpper",modifiers:{number:!0}}],staticStyle:{width:"80px"},attrs:{type:"number",placeholder:"次",min:"1",readonly:e.readOnly},domProps:{value:e.packetData.timesLimitUpper},on:{input:function(t){t.target.composing||(e.packetData.timesLimitUpper=e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}}):e._e()]),e._v(" "),a("small",{staticClass:"form-text text-muted"},[e._v("单人邀请他人入群，奖励到达上限后，不再发放")])])])]):e._e(),e._v(" "),e._m(0)])},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("footer",[a("button",{staticClass:"save",attrs:{type:"submit"}},[e._v("保存")])])}]}}});
//# sourceMappingURL=5.10d4f20c74cdec60ae73.js.map