webpackJsonp([1],{157:function(t,o,e){function a(t){e(175)}var n=e(4)(e(177),e(193),a,"data-v-d8398cca",null);t.exports=n.exports},175:function(t,o,e){var a=e(176);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e(155)("1eeccdbc",a,!0)},176:function(t,o,e){o=t.exports=e(154)(!0),o.push([t.i,"h4[data-v-d8398cca]{margin-top:0;padding-top:22.4px;padding-top:1.4rem;margin-left:32px;margin-left:2rem;font-weight:400;color:#858787;-webkit-box-flex:0;-ms-flex-positive:0;flex-grow:0}.robot-list[data-v-d8398cca]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;overflow-y:scroll;padding-top:32px;padding-top:2rem;color:#585b60}.robot-list .card[data-v-d8398cca]{height:175px;width:30%;margin:0 auto;float:left;margin-left:2.5%;margin-bottom:16px;margin-bottom:1rem}.card-body>img[data-v-d8398cca]{width:80px;height:80px;border-radius:50%;float:left;margin-right:32px;margin-right:2rem}.card-body>p[data-v-d8398cca]{margin-top:9.6px;margin-top:.6rem}.card-body>button[data-v-d8398cca]{float:right}.login-robot[data-v-d8398cca]{text-align:center;font-size:25.6px;font-size:1.6rem;position:relative}.login-robot span[data-v-d8398cca]{position:absolute;top:50%;left:50%;margin-left:-80px;margin-left:-5rem;margin-top:-25.6px;margin-top:-1.6rem;color:#585b60}.help[data-v-d8398cca]{color:#585b60;font-size:12.8px;font-size:.8rem}","",{version:3,sources:["/Users/hxf/www/weRobot/src/page/RobotManage.vue"],names:[],mappings:"AAAA,oBAAoB,aAAa,mBAAmB,mBAAmB,iBAAiB,iBAAiB,gBAAgB,cAAc,mBAAmB,oBAAoB,WAAW,CAAC,6BAA6B,mBAAmB,oBAAoB,YAAY,kBAAkB,iBAAiB,iBAAiB,aAAa,CAAC,mCAAmC,aAAa,UAAU,cAAc,WAAW,iBAAiB,mBAAmB,kBAAkB,CAAC,gCAAgC,WAAW,YAAY,kBAAkB,WAAW,kBAAkB,iBAAiB,CAAC,8BAA8B,iBAAiB,gBAAgB,CAAC,mCAAmC,WAAW,CAAC,8BAA8B,kBAAkB,iBAAiB,iBAAiB,iBAAiB,CAAC,mCAAmC,kBAAkB,QAAQ,SAAS,kBAAkB,kBAAkB,mBAAmB,mBAAmB,aAAa,CAAC,uBAAuB,cAAc,iBAAiB,eAAe,CAAC",file:"RobotManage.vue",sourcesContent:["h4[data-v-d8398cca]{margin-top:0;padding-top:22.4px;padding-top:1.4rem;margin-left:32px;margin-left:2rem;font-weight:400;color:#858787;-webkit-box-flex:0;-ms-flex-positive:0;flex-grow:0}.robot-list[data-v-d8398cca]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;overflow-y:scroll;padding-top:32px;padding-top:2rem;color:#585b60}.robot-list .card[data-v-d8398cca]{height:175px;width:30%;margin:0 auto;float:left;margin-left:2.5%;margin-bottom:16px;margin-bottom:1rem}.card-body>img[data-v-d8398cca]{width:80px;height:80px;border-radius:50%;float:left;margin-right:32px;margin-right:2rem}.card-body>p[data-v-d8398cca]{margin-top:9.6px;margin-top:.6rem}.card-body>button[data-v-d8398cca]{float:right}.login-robot[data-v-d8398cca]{text-align:center;font-size:25.6px;font-size:1.6rem;position:relative}.login-robot span[data-v-d8398cca]{position:absolute;top:50%;left:50%;margin-left:-80px;margin-left:-5rem;margin-top:-25.6px;margin-top:-1.6rem;color:#585b60}.help[data-v-d8398cca]{color:#585b60;font-size:12.8px;font-size:.8rem}"],sourceRoot:""}])},177:function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var a=e(7),n=e.n(a),i=e(11),s=e(178),r=e.n(s),c=e(183),d=e.n(c),l=e(188),p=e.n(l),u=e(35);o.default={name:"RobotManage",data:function(){return{focusRobotName:"",focusRobotId:"",loginRobotModal:!1,logoutRobotModal:!1,delRobotModal:!1,url:u.a,interval:""}},methods:n()({openLoginRobotModal:function(){this.loginRobotModal=!0},closeLoginRobotModal:function(){this.loginRobotModal=!1},openLogoutRobotModal:function(){this.logoutRobotModal=!0},closeLogoutRobotModal:function(){this.logoutRobotModal=!1},openDelRobotModal:function(t){var o=t.nickname,e=t.id;this.focusRobotName=o,this.focusRobotId=e,this.delRobotModal=!0},closeDelRobotModal:function(){this.delRobotModal=!1},toogleRobotStatu:function(t){var o=t.status,e=t.nickname,a=t.id;switch(this.focusRobotName=e,this.focusRobotId=a,o){case 0:this.openLoginRobotModal();break;case 1:this.openLogoutRobotModal()}}},Object(i.b)("Robot",["getRobotList"])),beforeRouteEnter:function(t,o,e){e(function(t){t.interval=setInterval(function(){t.getRobotList()},6e4)})},beforeRouteLeave:function(t,o,e){clearInterval(this.interval),e()},watch:{robotList:function(){0===this.robotList.length&&this.openLoginRobotModal()}},components:{LoginRobotModal:r.a,LogoutRobotModal:d.a,DeleteRobotModal:p.a},computed:n()({},Object(i.d)("User",["userToken"]),Object(i.d)("Robot",{robotList:"list"}))}},178:function(t,o,e){function a(t){e(179)}var n=e(4)(e(181),e(182),a,"data-v-d7d2c942",null);t.exports=n.exports},179:function(t,o,e){var a=e(180);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e(155)("73e8fab1",a,!0)},180:function(t,o,e){o=t.exports=e(154)(!0),o.push([t.i,".qrcode[data-v-d7d2c942]{width:40%;margin:10px auto;border:1px solid #e7e8eb}.qrcode img[data-v-d7d2c942]{width:100%;height:auto}.body[data-v-d7d2c942]{padding-top:32px;padding-top:2rem;padding-bottom:64px;padding-bottom:4rem}.body>span[data-v-d7d2c942]{width:100%;text-align:center;display:block}","",{version:3,sources:["/Users/hxf/www/weRobot/src/components/LoginRobotModal.vue"],names:[],mappings:"AAAA,yBAAyB,UAAU,iBAAiB,wBAAwB,CAAC,6BAA6B,WAAW,WAAW,CAAC,uBAAuB,iBAAiB,iBAAiB,oBAAoB,mBAAmB,CAAC,4BAA4B,WAAW,kBAAkB,aAAa,CAAC",file:"LoginRobotModal.vue",sourcesContent:[".qrcode[data-v-d7d2c942]{width:40%;margin:10px auto;border:1px solid #e7e8eb}.qrcode img[data-v-d7d2c942]{width:100%;height:auto}.body[data-v-d7d2c942]{padding-top:32px;padding-top:2rem;padding-bottom:64px;padding-bottom:4rem}.body>span[data-v-d7d2c942]{width:100%;text-align:center;display:block}"],sourceRoot:""}])},181:function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var a=e(19),n=e.n(a),i=e(20),s=e.n(i),r=e(7),c=e.n(r),d=e(11),l=e(55),p=e.n(l),u=e(62);o.default={name:"LoginRobotModal",props:["name","active"],data:function(){return{qrCodeUrl:"",refreshInterval:"",time:"",show:!1,timestamp:""}},methods:c()({open:function(){var t=this;return s()(n.a.mark(function o(){var e,a,i;return n.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,t.timestamp=(new Date).getTime(),o.next=4,u.a.getLoginQrcode({userId:t.userToken});case 4:return e=o.sent,a=e.uuid,i=e.qrcode,t.setUUId(a),t.qrCodeUrl=i,(""===t.refreshInterval||(new Date).getTime()-t.timestamp>=12e4)&&(t.refreshInterval=setInterval(s()(n.a.mark(function o(){return n.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,t.open();case 2:case"end":return o.stop()}},o,t)})),12e4)),o.next=12,t.isScan();case 12:o.next=17;break;case 14:o.prev=14,o.t0=o.catch(0),console.log(o.t0);case 17:case"end":return o.stop()}},o,t,[[0,14]])}))()},isScan:function(){var t=this;return s()(n.a.mark(function o(){var e,a;return n.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return e=t.timestamp,o.prev=1,o.next=4,u.a.isScan({userId:t.userToken,uuid:t.uuid});case 4:return o.next=6,t.isLogin();case 6:o.next=13;break;case 8:o.prev=8,o.t0=o.catch(1),a=1e3,"timeout"===o.t0&&(a=6e4),t.show&&e===t.timestamp&&(t.time=setTimeout(s()(n.a.mark(function o(){return n.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,t.isScan();case 2:case"end":return o.stop()}},o,t)})),a));case 13:case"end":return o.stop()}},o,t,[[1,8]])}))()},isLogin:function(){var t=this;return s()(n.a.mark(function o(){var e,a,i,r,c;return n.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return e=t.timestamp,o.prev=1,o.next=4,u.a.isLogin({userId:t.userToken,uuid:t.uuid});case 4:return a=o.sent,i=a.uin,r=a.id,clearInterval(t.refreshInterval),o.next=10,t.initRobot({uin:i,robotId:r});case 10:o.next=17;break;case 12:o.prev=12,o.t0=o.catch(1),c=1e3,"timeout"===o.t0&&(c=6e4),t.show&&e===t.timestamp&&(t.time=setTimeout(s()(n.a.mark(function o(){return n.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,t.isLogin();case 2:case"end":return o.stop()}},o,t)})),c));case 17:case"end":return o.stop()}},o,t,[[1,12]])}))()},initRobot:function(t){var o=this;return s()(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o.close(),e.next=4,u.a.init(t);case 4:o.$emit("activate"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,o,[[0,7]])}))()},close:function(){clearTimeout(this.time),clearInterval(this.refreshInterval),this.closeBackDrop(),this.time="",this.refreshInterval="",this.show=!1,this.$emit("close")}},Object(d.c)(["closeBackDrop","openBackDrop"]),Object(d.c)("User",["setUUId"])),components:{Modal:p.a},watch:{active:function(t){t&&(this.show=t,this.openBackDrop(),this.open())}},computed:c()({},Object(d.d)("User",["userToken","uuid"]))}},182:function(t,o){t.exports={render:function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("modal",{attrs:{active:t.show},on:{toogle:t.close}},[e("div",{staticClass:"modal-header"},[e("h5",[t._v(t._s(t.name?"机器人连接":"机器人创建"))]),t._v(" "),e("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:t.close}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),t._v(" "),e("div",{staticClass:"body"},[e("div",{staticClass:"qrcode"},[e("img",{attrs:{src:t.qrCodeUrl,alt:"登陆二维码"}})]),t._v(" "),e("span",[t._v(t._s(t.name?"用机器人"+t.name+"的微信账号扫码重新登录":"微信扫码并确认登陆，完成机器人创建"))])])])},staticRenderFns:[]}},183:function(t,o,e){function a(t){e(184)}var n=e(4)(e(186),e(187),a,"data-v-9a3ed22c",null);t.exports=n.exports},184:function(t,o,e){var a=e(185);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e(155)("3cbae026",a,!0)},185:function(t,o,e){o=t.exports=e(154)(!0),o.push([t.i,".body span[data-v-9a3ed22c]{color:#585b60;text-align:center;padding-top:32px;padding-top:2rem;padding-bottom:48px;padding-bottom:3rem;display:block}","",{version:3,sources:["/Users/hxf/www/weRobot/src/components/LogoutRobotModal.vue"],names:[],mappings:"AAAA,4BAA4B,cAAc,kBAAkB,iBAAiB,iBAAiB,oBAAoB,oBAAoB,aAAa,CAAC",file:"LogoutRobotModal.vue",sourcesContent:[".body span[data-v-9a3ed22c]{color:#585b60;text-align:center;padding-top:32px;padding-top:2rem;padding-bottom:48px;padding-bottom:3rem;display:block}"],sourceRoot:""}])},186:function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var a=e(19),n=e.n(a),i=e(20),s=e.n(i),r=e(7),c=e.n(r),d=e(55),l=e.n(d),p=e(11),u=e(62);o.default={name:"LogoutRobotModal",props:["name","active","id"],data:function(){return{show:!1}},methods:c()({submit:function(){var t=this;return s()(n.a.mark(function o(){var e;return n.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t.loading({text:"正在断线"}),o.prev=1,o.next=4,u.a.logout({robotId:t.id});case 4:e=o.sent,t.loading({text:e}),t.loaded(1500),t.$emit("activate"),t.close(),o.next=15;break;case 11:o.prev=11,o.t0=o.catch(1),t.loading({text:o.t0}),t.loaded(1500);case 15:case"end":return o.stop()}},o,t,[[1,11]])}))()},close:function(){this.closeBackDrop(),this.show=!1,this.$emit("close")}},Object(p.c)(["closeBackDrop","openBackDrop","loading"]),Object(p.b)(["loaded"])),watch:{active:function(t){t&&(this.show=t,this.openBackDrop())}},components:{Modal:l.a}}},187:function(t,o){t.exports={render:function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("modal",{attrs:{active:t.active},on:{toogle:t.close}},[e("div",{staticClass:"modal-header"},[e("h6"),t._v(" "),e("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:t.close}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),t._v(" "),e("div",{staticClass:"body"},[e("span",[t._v("你确定要掉线"),e("br"),t._v('机器人"'+t._s(t.name)+'"吗？')]),t._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-submit",attrs:{type:"button"},on:{click:t.submit}},[t._v("确定掉线")]),t._v(" "),e("button",{staticClass:"btn btn-cancel",attrs:{type:"button"},on:{click:t.close}},[t._v("取消")])])])])},staticRenderFns:[]}},188:function(t,o,e){function a(t){e(189)}var n=e(4)(e(191),e(192),a,"data-v-10188d6a",null);t.exports=n.exports},189:function(t,o,e){var a=e(190);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e(155)("556bfa3e",a,!0)},190:function(t,o,e){o=t.exports=e(154)(!0),o.push([t.i,".body span[data-v-10188d6a]{color:#585b60;text-align:center;padding-top:32px;padding-top:2rem;padding-bottom:48px;padding-bottom:3rem;display:block}","",{version:3,sources:["/Users/hxf/www/weRobot/src/components/DeleteRobotModal.vue"],names:[],mappings:"AAAA,4BAA4B,cAAc,kBAAkB,iBAAiB,iBAAiB,oBAAoB,oBAAoB,aAAa,CAAC",file:"DeleteRobotModal.vue",sourcesContent:[".body span[data-v-10188d6a]{color:#585b60;text-align:center;padding-top:32px;padding-top:2rem;padding-bottom:48px;padding-bottom:3rem;display:block}"],sourceRoot:""}])},191:function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var a=e(19),n=e.n(a),i=e(20),s=e.n(i),r=e(7),c=e.n(r),d=e(55),l=e.n(d),p=e(11),u=e(62);o.default={name:"DeleteRobotModal",props:["name","active","id"],data:function(){return{show:!1}},methods:c()({submit:function(){var t=this;return s()(n.a.mark(function o(){var e;return n.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t.loading({text:"正在断线"}),o.prev=1,o.next=4,u.a.delRobot({robotId:t.id});case 4:e=o.sent,t.loading({text:e}),t.loaded(1500),t.$emit("activate"),t.close(),o.next=15;break;case 11:o.prev=11,o.t0=o.catch(1),t.loading({text:o.t0}),t.loaded(1500);case 15:case"end":return o.stop()}},o,t,[[1,11]])}))()},close:function(){this.closeBackDrop(),this.show=!1,this.$emit("close")}},Object(p.c)(["closeBackDrop","openBackDrop","loading"]),Object(p.b)(["loaded"])),watch:{active:function(t){t&&(this.show=t,this.openBackDrop())}},components:{Modal:l.a}}},192:function(t,o){t.exports={render:function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("modal",{attrs:{active:t.active},on:{toogle:t.close}},[e("div",{staticClass:"modal-header"},[e("h6"),t._v(" "),e("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:t.close}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),t._v(" "),e("div",{staticClass:"body"},[e("span",[t._v("你确定要删除"),e("br"),t._v('机器人"'+t._s(t.name)+'"吗？')]),t._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-submit",attrs:{type:"button"},on:{click:t.submit}},[t._v("确定删除")]),t._v(" "),e("button",{staticClass:"btn btn-cancel",attrs:{type:"button"},on:{click:t.close}},[t._v("取消")])])])])},staticRenderFns:[]}},193:function(t,o){t.exports={render:function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{attrs:{id:"robot-manage"}},[e("h4",[t._v("机器人管理")]),t._v(" "),e("div",{staticClass:"robot-list"},[t._l(t.robotList,function(o){return e("div",{key:o.id,staticClass:"card"},[e("div",{staticClass:"card-body"},[e("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){t.openDelRobotModal(o)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])]),t._v(" "),e("img",{attrs:{src:t.url+"/image/qrcode/"+o.headImgUrl,alt:"头像"}}),t._v(" "),e("p",{staticClass:"card-text"},[t._v("机器人："+t._s(o.nickname))]),t._v(" "),e("p",{staticClass:"card-text"},[t._v("状态："+t._s(o.status?"在线":"离线"))]),t._v(" "),e("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){t.toogleRobotStatu(o)}}},[t._v(t._s(o.status?"手动掉线":"重新连接"))])])])}),t._v(" "),0===t.robotList.length?e("div",{staticClass:"card login-robot",on:{click:t.openLoginRobotModal}},[t._m(0)]):t._e()],2),t._v(" "),t._m(1),t._v(" "),e("delete-robot-modal",{attrs:{active:t.delRobotModal,name:t.focusRobotName,id:t.focusRobotId},on:{activate:t.getRobotList,close:t.closeDelRobotModal}}),t._v(" "),e("login-robot-modal",{attrs:{active:t.loginRobotModal,name:t.focusRobotName},on:{activate:t.getRobotList,close:t.closeLoginRobotModal}}),t._v(" "),e("logout-robot-modal",{attrs:{active:t.logoutRobotModal,name:t.focusRobotName,id:t.focusRobotId},on:{activate:t.getRobotList,close:t.closeLogoutRobotModal}})],1)},staticRenderFns:[function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"card-body"},[e("span",{staticClass:"card-title"},[t._v("+ 创建机器人")])])},function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("ol",{staticClass:"help"},[t._v("使用帮助：\n        "),e("li",[t._v("如果尝试多次登录失败，请登录web微信（http://wx.qq.com），检查是否可以正常登录")]),t._v(" "),e("li",[t._v("微信机器人登录后，请尽量避使用PC客户端登录或网页端登录微信，否则会导致机器人服务不稳定")])])}]}}});
//# sourceMappingURL=1.226dac34f05c54fa82f6.js.map